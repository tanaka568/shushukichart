import streamlit as st
import pandas as pd
import plotly.express as px


# タイトル
st.title("修習期・弁護士会別 新規登録者数")

# データの準備
data = """
50,525,133,71,79,18,11,12,4,0,3,5,2,3,4,51,13,6,4,1,1,20,3,4,3,1,0,5,1,3,16,0,1,4,1,3,1,6,6,2,1,2,2,3,10,0,1,1,1,0,0,3
51,534,108,94,75,19,9,7,0,1,1,4,2,1,6,72,9,11,4,2,0,26,1,1,0,4,1,11,1,2,1,0,19,1,1,0,2,1,0,5,8,0,0,1,2,2,8,1,4,1,3,0,2
52,555,116,91,91,17,14,10,0,0,2,4,1,5,3,68,12,15,5,3,3,21,1,2,1,4,1,6,1,5,0,0,15,2,1,1,2,1,2,3,1,3,0,1,2,1,7,2,1,1,3,2,1,1
53,601,143,107,88,23,11,12,5,2,2,3,1,2,6,65,8,15,3,2,2,21,3,1,1,3,0,9,1,4,0,0,21,3,0,0,5,2,0,2,7,2,0,0,1,1,5,0,0,1,2,0,5,1
54,745,153,110,136,33,14,13,4,1,3,7,0,3,5,102,16,18,3,5,2,32,1,3,4,2,2,4,2,2,2,0,19,1,0,1,3,2,2,7,7,4,1,3,0,1,7,0,2,2,0,0,0,1
55,785,147,129,131,31,14,16,5,1,1,7,4,3,2,98,25,16,5,2,1,36,1,3,1,5,0,9,3,4,2,3,19,2,4,2,5,5,3,4,5,2,1,1,0,1,16,0,2,2,3,0,1,2
56,787,174,125,124,17,15,10,4,3,9,7,2,2,6,78,12,19,5,2,6,40,5,5,1,1,3,14,2,4,2,2,21,1,3,4,4,1,2,5,1,4,2,3,2,3,15,0,1,5,5,2,1,3
57,971,182,142,129,37,20,18,7,6,8,11,4,5,8,118,17,19,6,5,3,52,7,3,3,4,2,14,3,6,1,2,31,4,4,4,13,3,3,7,5,2,1,0,1,0,32,2,3,5,1,3,1,4
58,949,189,149,132,46,22,18,12,3,6,8,3,4,8,83,18,24,6,4,2,41,3,1,2,8,3,6,6,8,4,2,26,2,5,4,9,4,4,7,13,2,3,4,5,2,19,0,2,2,4,4,3,4
59,1221,233,183,144,52,25,30,10,8,7,22,3,13,9,118,20,27,9,11,5,57,5,6,5,9,7,16,8,9,0,3,38,4,5,5,7,5,7,11,18,7,2,2,1,4,25,0,3,1,9,1,3,9
60,2055,389,309,253,89,49,40,15,14,16,28,6,9,15,217,32,57,11,15,2,116,9,11,8,10,7,31,7,20,7,3,59,4,9,10,16,8,10,11,23,14,2,6,2,9,48,3,4,5,7,1,4,5
61,2062,425,252,307,91,42,35,14,14,13,23,7,11,14,199,44,57,11,6,11,95,12,15,6,6,5,35,9,24,3,9,62,5,3,12,11,12,13,16,17,9,8,3,4,8,43,4,3,7,15,7,1,4
62,2047,376,238,307,95,53,52,17,13,18,24,5,13,19,200,44,46,9,9,9,108,9,11,10,9,11,40,5,21,7,8,63,9,11,10,14,15,7,13,16,14,5,9,4,7,34,6,2,5,3,4,4,6
63,1863,348,221,264,70,42,45,13,22,11,22,6,15,12,177,32,54,6,8,9,89,13,15,9,12,8,36,8,20,4,2,67,9,9,9,14,20,5,11,19,5,4,6,1,6,44,4,5,1,10,2,5,14
64,1890,367,216,237,83,55,48,10,10,16,30,8,15,11,184,43,46,9,13,4,85,14,13,6,11,6,37,8,13,3,7,59,7,5,5,19,15,8,13,28,11,8,6,5,7,41,4,6,4,15,6,4,6
65,1846,362,210,254,77,43,55,13,8,14,32,5,14,9,181,38,47,8,9,5,84,12,9,9,11,9,29,10,27,3,4,67,7,12,5,12,7,6,9,19,13,4,7,3,6,36,4,4,5,11,3,8,7
66,1764,337,203,218,83,52,32,22,5,13,23,9,15,16,166,39,44,7,6,5,105,12,11,3,10,4,33,5,26,3,2,67,3,5,11,16,14,7,13,22,10,4,5,3,6,44,1,3,3,9,2,1,6
67,1715,341,247,246,62,45,44,11,7,11,20,2,6,12,169,40,41,7,1,2,88,10,5,3,7,6,19,10,17,3,3,63,5,13,5,13,7,3,9,26,6,3,4,4,4,32,3,5,1,6,4,5,9
68,1538,315,244,241,61,31,31,10,3,9,22,3,13,6,162,34,38,2,2,6,72,8,2,2,4,1,18,8,12,2,2,56,4,1,5,6,6,5,13,15,3,1,4,0,1,26,2,4,5,8,1,2,6
69,1545,307,240,215,75,29,34,14,10,17,24,2,9,9,142,29,46,7,3,5,70,5,4,4,8,4,22,11,14,1,1,56,6,5,3,10,11,4,13,12,8,4,3,3,1,27,0,3,1,3,5,3,3
70,1374,289,242,232,49,31,27,13,5,10,16,2,4,6,129,23,30,6,7,2,70,4,4,2,8,2,13,3,6,2,2,47,3,5,1,6,4,3,4,16,3,0,2,0,2,24,2,0,3,5,0,2,3
71,1336,255,262,213,57,25,16,9,4,10,9,2,5,6,152,27,33,4,3,5,51,3,3,6,3,3,8,1,10,4,2,58,0,1,0,6,6,0,8,18,4,4,2,1,1,19,3,2,1,4,3,2,2
72,1300,235,243,235,44,31,19,8,5,7,12,1,3,5,137,29,22,4,2,3,64,8,5,0,1,2,14,5,7,3,1,45,2,2,5,3,7,4,9,12,5,3,1,1,5,20,2,4,1,6,3,2,3
73,1298,233,279,251,47,32,25,5,4,7,12,2,7,5,134,20,30,2,4,0,48,5,4,2,6,2,10,6,6,1,5,29,2,3,3,3,3,3,4,15,2,2,2,0,1,21,1,1,2,1,2,2,2
74,1282,230,273,239,45,29,25,4,12,8,11,0,7,4,125,21,21,6,3,3,46,3,5,0,5,4,15,4,6,0,1,31,3,3,2,4,9,1,8,13,4,5,3,3,2,21,0,0,1,5,4,1,4
75,1154,234,265,213,38,18,16,5,3,2,10,3,0,4,112,14,23,3,5,2,38,4,3,2,1,4,9,2,8,3,0,36,2,6,2,2,4,1,5,12,4,2,2,1,2,15,0,3,0,8,0,2,1
76,1194,240,292,182,29,17,24,8,5,10,14,2,9,4,138,19,18,3,5,1,45,4,3,2,1,0,10,7,5,2,0,32,2,2,0,4,1,1,6,5,2,0,2,2,3,19,2,0,0,2,2,2,6
77,1455,265,400,283,42,21,33,2,5,6,10,0,2,3,140,22,25,1,2,1,60,5,3,2,2,1,10,0,7,1,1,32,2,1,2,8,5,3,7,4,4,0,1,0,0,23,0,1,0,4,1,0,2
"""

# 行ごとに分割
rows = [list(map(int, line.split(','))) for line in data.strip().split('\n')]

columns = "修習期,合計,東京,第一東京,第二東京,神奈川,埼玉,千葉,茨城,栃木,群馬,静岡,山梨,長野,新潟,大阪,京都,兵庫,奈良,滋賀,和歌山,愛知,三重,岐阜,福井,金沢,富山,広島,山口,岡山,鳥取,島根,福岡,佐賀,長崎,大分,熊本,鹿児島,宮崎,沖縄,仙台,福島,山形,岩手,秋田,青森,札幌,函館,旭川,釧路,香川,徳島,高知,愛媛"
column_names = columns.split(',')

df = pd.DataFrame(rows, columns=column_names)

# プロット用に縦持ち（long形式）に変換
df_long = df.melt(id_vars=["修習期"], var_name="弁護士会", value_name="新規登録者数")

# 弁護士会選択（複数選択可）
regions = st.multiselect(
    "表示する弁護士会を選択してください",
    options=df_long["弁護士会"].unique(),
    default=["東京", "大阪", "愛知", "福岡", "札幌"]
)
# 選択された弁護士会だけフィルタリング
filtered = df_long[df_long["弁護士会"].isin(regions)]

# 折れ線グラフ
fig = px.line(filtered, x="修習期", y="新規登録者数", color="弁護士会", markers=True,
              title="新規登録者数の推移（弁護士会別）")

# 表示
st.plotly_chart(fig, use_container_width=True)
